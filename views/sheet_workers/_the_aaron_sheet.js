/* ---- BEGIN: TheAaronSheet.js ---- */
// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
// By:       The Aaron, Arcane Scriptomancer
// Version:  0.2.5
// Contact:  https://app.roll20.net/users/104025/the-aaron
// Minified with http://jscompress.com/
var TAS=TAS||function(){"use strict";function u(t,o,e){_.each(e,function(e){var n=function(e){switch(typeof e){case"string":return"string";case"boolean":return"boolean";case"number":return _.isNaN(e)?"NaN":e.toString().match(/\./)?"decimal":"integer";case"function":return"function: "+(e.name?e.name+"()":"(anonymous)");case"object":return _.isArray(e)?"array":_.isArguments(e)?"arguments":_.isNull(e)?"null":"object";default:return typeof e}}(e);switch(n){case"string":t(e);break;case"undefined":case"null":case"NaN":t("["+n+"]");break;case"number":case"not a number":case"integer":case"decimal":case"boolean":t("["+n+"]: "+e);break;default:t("["+n+"]:========================================="),o(e),t("=========================================================")}})}function e(e){var n=e.key,t=e.title||"TAS",o=e.color&&e.color.bgLabel||"blue",r=e.color&&e.color.label||"white",c=e.color&&e.color.bgText||"blue",a=e.color&&e.color.text||"white",i=function(e){console.log("%c "+t+": %c "+e+" ","background-color: "+o+";color: "+r+"; font-weight:bold;","background-color: "+c+";color: "+a+";")};return function(){"TAS"!==n&&!p.logging[n]||u(i,function(e){console.log(e)},_.toArray(arguments))}}function b(){var e=new Error("dummy");return _.map(_.rest(e.stack.replace(/^[^(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@").split("\n")),function(e){return e.replace(/\s+.*$/,"")})}function n(e,n,t){var o,r,c,a,i,u,l,f;return"function"==typeof e&&(t=n,n=e,e=void 0),p.debugMode?((o=b()).shift(),a=n,i=t,u=o,l=e,-1===(f=_.findIndex(h,function(e){return _.difference(e.stack,u).length===_.difference(u,e.stack).length&&0===_.difference(e.stack,u).length&&e.label===l}))&&(f=h.length,h.push({stack:u,label:l})),new Function("cb","ctx","TASlog","return function TAS_CALLSTACK_"+f+"(){var start,end;TASlog('Entering: '+(cb.name||'(anonymous function)'));start=_.now();cb.apply(ctx||{},arguments);end=_.now();TASlog('Exiting: '+(cb.name||'(anonymous function)')+' :: '+(end-start)+'ms elapsed');};")(a,i,S)):(r=n,c=t,function(){r.apply(c||{},arguments)})}function i(e,n){m[e]=n}function d(n,e,t,o){var r,c,a;r=_.contains(["S","F","I","D"],e)?"_"+e:e,c=o||e,a=t,_.each(["S","I","F"],function(e){_.has(n,e)||Object.defineProperty(n,e,{value:{},enumerable:!1,readonly:!0})}),_.has(n,"D")||Object.defineProperty(n,"D",{value:_.reduce(_.range(10),function(e,n){return Object.defineProperty(e,n,{value:{},enumerable:!0,readonly:!0}),e},{}),enumerable:!1,readonly:!0}),Object.defineProperty(n,r,{enumerable:!0,set:function(e){e!==a&&i(c,a=e)},get:function(){return a}}),Object.defineProperty(n.S,r,{enumerable:!0,set:function(e){var n=e.toString();n!==a&&i(c,a=n)},get:function(){return a.toString()}}),Object.defineProperty(n.I,r,{enumerable:!0,set:function(e){var n=parseInt(e,10)||0;n!==a&&i(c,a=n)},get:function(){return parseInt(a,10)||0}}),Object.defineProperty(n.F,r,{enumerable:!0,set:function(e){var n=parseFloat(e)||0;n!==a&&i(c,a=n)},get:function(){return parseFloat(a)||0}}),_.each(_.range(10),function(t){Object.defineProperty(n.D[t],r,{enumerable:!0,set:function(e){var n=(parseFloat(e)||0).toFixed(t);n!==a&&i(c,a=n)},get:function(){return(parseFloat(a)||0).toFixed(t)}})})}function r(e){return l=e,f=[],b=[],s=[],g=[],{attrs:n,attr:n,column:t,columns:t,field:t,fields:t,reduce:o,inject:o,foldl:o,map:r,collect:r,each:c,forEach:c,tap:a,do:a,after:i,last:i,done:i,execute:u,go:u,run:u};function n(){return f=j(arguments,f),this}function t(){return b=j(arguments,b),this}function o(e,n,t,o){return s.push({type:"reduce",func:e&&_.isFunction(e)&&e||_.noop,memo:(_.isUndefined(n),n),final:t&&_.isFunction(t)&&t||_.noop,context:o||{}}),this}function r(e,n,t){return s.push({type:"map",func:e&&_.isFunction(e)&&e||_.noop,final:n&&_.isFunction(n)&&n||_.noop,context:t||{}}),this}function c(e,n,t){return s.push({type:"each",func:e&&_.isFunction(e)&&e||_.noop,final:n&&_.isFunction(n)&&n||_.noop,context:t||{}}),this}function a(e,n){return s.push({type:"tap",final:e&&_.isFunction(e)&&e||_.noop,context:n||{}}),this}function i(e,n){return g.push({callback:e&&_.isFunction(e)&&e||_.noop,context:n||{}}),this}function u(e,n){var o={},r={},t=[],c=[];i(e,n),getSectionIDs("repeating_"+l,function(e){t=e,c=_.reduce(t,function(e,n){return e.concat(_.map(b,function(e){return"repeating_"+l+"_"+n+"_"+e}))},[]),getAttrs(_.uniq(f.concat(c)),function(c){_.each(f,function(e){c.hasOwnProperty(e)&&d(r,e,c[e])}),o=_.reduce(t,function(e,t){var n,o,r={};return n=r,o=t,Object.defineProperty(n,"id",{value:o,writable:!1,enumerable:!1}),_.each(b,function(e){var n="repeating_"+l+"_"+t+"_"+e;d(r,e,c[n],n)}),e[t]=r,e},{}),_.each(s,function(n){var t;switch(n.type){case"tap":_.bind(n.final,n.context,o,r)();break;case"each":_.each(o,function(e){_.bind(n.func,n.context,e,r,e.id,o)()}),_.bind(n.final,n.context,o,r)();break;case"map":t=_.map(o,function(e){return _.bind(n.func,n.context,e,r,e.id,o)()}),_.bind(n.final,n.context,t,o,r)();break;case"reduce":t=n.memo,_.each(o,function(e){t=_.bind(n.func,n.context,t,e,r,e.id,o)()}),_.bind(n.final,n.context,t,o,r)()}}),setAttrs(m),m={},_.each(g,function(e){_.bind(e.callback,e.context)()})})})}var l,f,b,s,g}var t={key:"error",title:"Error",color:{bgLabel:"#C11713",label:"white",bgText:"#C11713",text:"white"}},o={key:"warn",title:"Warning",color:{bgLabel:"#F29140",label:"white",bgText:"#FFD8B7",text:"black"}},c={key:"info",title:"Info",color:{bgLabel:"#413FA9",label:"white",bgText:"#B3B2EB",text:"black"}},a={key:"notice",title:"Notice",color:{bgLabel:"#33C133",label:"white",bgText:"#ADF1AD",text:"black"}},l={key:"log",title:"Log",color:{bgLabel:"#f2f240",label:"black",bgText:"#ffff90",text:"black"}},f={key:"TAS",title:"function",color:{bgLabel:"#413FA9",label:"white",bgText:"#B3B2EB",text:"black"}},s={key:"TAS",title:"ASYNC CALL",color:{bgLabel:"#413FA9",label:"white",bgText:"#413FA9",text:"white"}},g={key:"TAS",title:"TAS",color:{bgLabel:"grey",label:"black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)",bgText:"grey",text:"black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)"}},p={debugMode:!1,logging:{log:!0,notice:!0,info:!0,warn:!0,error:!0,debug:!1}},h=[],m={},y=e({key:"debug",title:"DEBUG",color:{bgLabel:"#7732A2",label:"#F2EF40",bgText:"#FFFEB7",text:"#7732A2"}}),x=e(t),k=e(o),A=e(c),w=e(a),F=e(l),S=e(g),v=e(f),T=e(s),L=function(e){var n,t;_.find(e,function(e){return(n=e.match(/TAS_CALLSTACK_(\d+)/))?(t=h[n[1]],T("===================="+(t.label?"> "+t.label+" <":"")+"===================="),L(t.stack),!0):(v(e),!1)})},j=function(t,e){return _.chain(t).reduce(function(e,n){return"string"==typeof n?e.push(n):(_.isArray(t)||_.isArguments(t))&&(e=j(n,e)),e},_.isArray(e)&&e||[]).uniq().value()};return console.log("%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  The Aaron Sheet  v0.2.5  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•","background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;"),console.log("%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  Last update: "+new Date(1504710542e3)+"  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•","background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;"),{repeatingSimpleSum:function(e,t,o){r(e).attr(o).field(t).reduce(function(e,n){return e+n.F[t]},0,function(e,n,t){t.S[o]=e}).execute()},repeating:r,config:function(e){var n=_.defaults(e,p);n.logging=_.defaults(e&&e.logging||{},p.logging),p=n},callback:n,callstack:function(){var e;p.debugMode&&((e=b()).shift(),S("==============================> CALLSTACK <=============================="),L(e),S("========================================================================="))},debugMode:function(){p.logging.debug=!0,p.debugMode=!0},isDebugMode:function(){return p.debugMode},_fn:n,debug:y,error:x,warn:k,info:A,notice:w,log:F}}();
/* ---- END: TheAaronSheet.js ---- */
